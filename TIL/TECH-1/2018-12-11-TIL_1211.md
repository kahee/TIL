---
title: "TIL - 1211"
date: 2018-12-11 00:00:00
img:
categories:
- TIL, Network
---

## 컴퓨터 네트워킹

----

## Inside of Router

1. 라우터 전체적인 개요
- high-speed-switching-fabric : 포워딩
- IP 주소가 가장 핵심정인 정보로서 데이터가 어디로 이동해야하는지를 알려주기 때문

2. Input Port 기능
- 외부에서 라우터로 데이터를 전달
- 데이터 링크 계층의 : 이더넷
- IP데이터그램이 항상 실시간으로 처리되지 않을 수 있음 -> 그래서 중간 저장공간이 있음 = 수신버터/input 큐

3. Input Port 큐잉
- swift fabric이 처리하지 못하면 어떨수 없이 큐잉에 저장되는 지연시간이 생김
- 이런 지연을 겪지 않기 위해 switch fabirc 처리 속도 << 모든 input 포트에 들어오는 데이터의 합
- 지연시간이 길어지면 패킷 손실과 같은 문제도 생김
- HOL(HEAD-OF-THE-LINE) blocking
    - 두개의 패킷이 같은 곳으로 가야할 때 발생되는 문제가 발생
    - 같은 곳을 가하는 패킷 뒤에 있는 패킷이 못감(사진에선 초록색패킷)
    - 순서대로 처리해야하기 때문에 초록색 패킷의 지연시간은 당연함 그러나 동시 배정받은 다른 패킷으로 발생되는 지연에서 발생되는 것을 HOL 블록킹

4. switching Fabrics
- input 버터에 있는 패킷을 어떻게 적절하게 output 패킷으로 보내는가?
- switching 속도
    - 메모리
    - 버스
    - 크로스버스

5. 메모리 방식
- 가장 간단한 라우터 방식
- 보통의 pc 를 가지고 라우터로 구성할 수 있음
- 이더넷에 도착한 정보를 메모리에 저장 -> IP주소를 보고 처리
- 소프트웨어적으로 처리하기 때문에 비용적/구현이 매우 간담
- 주 메모리의 정보들을 cpu가 읽고 헤더정보를 찾고 보내는것 소프트웨어적으로 결정 = 소켓프로그래밍 -> 메모리간의 복사들은 시간이 많이 걸림 -> 처리 속도가 느림

6. 버스 방식
- 라우터의 속도 제약을 완화하기 나온 것
- input 포트와 output 포트 버퍼간에 바로 복사가 일어남 -> 훨씬 빠르게 처리 가능
- input 버터/output 버터가 여러개인 경우 버스를 두고 처리 => 그러나 어디로 가야하는지는 CPU가 결정
- 복사를 한번만 해도되기때문에 속도측면에 메모리방식보다 좋다.
- 그러나 버스를 공유하기 때문에 (하나의 복사) 데이터가 올라오면 전체가 흘러내려오기 때문에 데이터가 제대로 전달되지 않을 수도 있다. => 동시전송이 어려움
- ex Cisco 5600 -> 회사의 라우터로는 적절

7. Interconnection 네트워크
- 버스 방식의 경우 메모리 방식보다 속도면에서는 빠르나 대규모 서비스에서 사용되기엔 어렵다.
- 크로스바 형식으로 이루어짐(바둑판형식)
- b, c -> b 로간다면 그에 대한 충돌은 생김
- 반얀 네트워크 : 크로스바 스위치처럼 많은 스위치가 필요하지 않음 (나무처럼 되어잇음) -> 레벨을 만듬
- ex) Cisco 120000
- 모든 하나의 input 에서 모든 output으로 갈수 있음
- 크로스바보단 스위치가 적기 때문에 비용은 저렴하나 HOL 블로킹과 같은 지연문제가 발생될 수 있음

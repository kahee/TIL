---
title: "TIL - 0411"
date: 2019-04-11 00:00:00
img:
categories:
- TIL, Network
---

## Session Initiation Protocol
- 세션을 초기화 하는 프로토콜

1. SIP
- 여러 디바이스를 동시에 사용하거나 접속할 때마다 IP주소가 달라져서 연결하기가 어려움
- SIP and RTP
- 연결을 처음에 설립하기 위해 SIP를 이용 그 이후엔 RTP를 통해 통신

2. SIP 서비스
- caller 와 callee 사이에 연결 설정을 해줘야 함
    - callee에게 caller가 전화하는 것을 알려줘야함
    - 인코딩 방식 합의
    - 전화를 끊을 수 있는 기능
- callee의 IP주소를 알아낼 수 있어야함
- 콜에 대한 매니지먼트를 가능하게 함 : RTP 세션 내에 여러개의 스트림이 있을 수 있음, 연결이 된 상태 후에 인코딩 방식이 변경 할 수 있도록 해줘야함, 새로운 사람을 초대하거나 이런 기능도 필요

3. 예시
- 서로의 IP주소를 알고 있다고 가정

4. SIP 특성
- out of band protocol : 멀티미디어 트래픽을 보내는 방식과는 다른 방식이다. -> 세션을 위한 정보만 가지고 있음
- ASCII 로 이루어져있어서 읽을 수 있다. 
- TCP, UDP로 해도 상관없음 -> 어플리케이션단에서 이 메시지를 읽기 대문에

5. Name Translation and User Location
- 위치와 이름을 알 수 없다.
- DHCP 프로토콜을 사용하기 때문에 이러한 정보를 알기가 어려운데 어떻게 연결을 수립할 수 있는가? -> 유저의 이름과 이메일 주소를 사용하여 연결
- SIP proxy

6. SIP proxy
- 각각의 사용자들이 자신에게 할당된 프록시 서버가 있음  
- INVITE 메시지를 직접적으로 전달하는 것이 아니라 중간에 프록시를 걸쳐서 도달함
- 이렇게 하는 경우 상대방의 IP 주소를 알 수 있음

7. SIP 등록
- SIP 등록을 해야만 프록시 서버에서 IP 주소를 알 수 있음
- PDA 를 통해 밥이 연결을 했다면 정보가 담긴 메시지가 프록시한테 전달이 된다.

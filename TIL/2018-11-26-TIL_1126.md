---
title: "TIL - 1126"
date: 2018-11-26 00:00:00
img:
categories:
- TIL, Network
---

## 컴퓨터 네트워킹

----

## Peer-to-Peer Application

1. P2P
- 항상 켜져있는 서버가 존재하지 않는다.
- 필요 할대마다 접속 했다가 주소도 변할 수 있다.
- P2P에서는 클라이언트-서버 역할을 둘다 할 수 있다.
- 서버-클라이언트 모델의 경우 클라이언트 수가 늘어나면 서버가 감당해야하는 부분이 선형적으로 증가 한다. 그러나 P2P의 경우 클라이언트들이 일정부분을 담당해주기 때문에 처음 접속했을 대, 공유할 데이터가 없으면 서버 역할은 못하더라도 다른 사람에게 공유해줄 수 있기 때문에 오버헤드가 많이 증가하지 않음

2. BitTorrent
- 파일을 공유 할 때는 chunk 라고 하는 256kb 정도의 크기를 가진다.
- 파일을 다운로드 할때는 A 에게 chunk 를 받고 B에게 받는 식으로 전체를 조합하여 하나의 덩어리로 만들기 때문에 잘게 나누어 놓았음
- torrent : chunk를 주고 받는 peer들의 그룹을 뜻하는 것임
- Tracker : 처음 접속했을 때는 상대 Peer 들의 IP 주소를 모르는데, 이때 누구한테 접속해야 그 정보를 가지고 있는 것임

3. Chunks 주고 받기
- 특정 chunks를 누가 가지고 있는지 조사를 하여 흔하지 않은 청크부터 받고 그뒤에 흔한 것을 받으면 됨
- 여러개의 청크가 있다면 가장 적은 peer를 가지고 있는 청크부터 다운로드 받는 것이 유리하다. 그리고 네트워크 전체 입장에서도 적은 peer 가 가진 청크를 받아서 전체적으로 퍼지는 것이 다운로드 효과를 높일 수 잇다.
- free-rider : 많은 사람들이 자신은 다운로드만 하고 싶어하고 남한테 데이터를 제공하려 하지 않는 행위.
- tit-for-tat (받은대로 갚아주다) : peer들은 주기적으로 자기한테 데이터를 가장 잘 주는 4개의 top 4 peer 선택하여 매 10초마다 선정한 top 4 peer 한테 자기 서비스를 해주는 것 -> 처음 접속하는 경우 누구한테 데이터를 주지 않기 때문에 데이터를 받지 못한다. -> top4를 측정하면 30초마다 랜덤하게 하나의 peer 를 선정하여 서비스를 제공
정리 : 새로 들어온 사용자가 30초마다 임의로 랜덤하게 peer에게 서비스를제공하는데 이때 기존 peer보다 서비스를 잘해주게 되면 새로운 사용자는  top 4 peer 에 들어가게 된다.

-------

## Video Streaming and CDNs

1. Video Traffic
- scalability : 비디오 트래픽의 문제는 데이터가 크기때문에 서버가 한 군데가 있으면 이 요청이 굉장이 매우 버거워진다.

2. content Distribution Networks
- 위의 문제를 해결하기 위해 나온 것
- 서버를 한 군데 두지 않고 전세계에 서버를 분산해서 놓는다.
- 일부 서버가 고장 나더라도 지속적으로 서비스를 제공할 수 있도록 하며 거리가 짧아 지게 하여 트래픽을 낮추며 속도를 빠르게 한다.

3. 넷플릭스
- 넷플릭스 계정 서버 로그인 -> 아마존 서버 (비디오 목록) -> 검색하면 xml 파일을 줌 -> 사용자의 위치와 데이터를 고려하여 가장 적합한 CDN 서버를 제공
